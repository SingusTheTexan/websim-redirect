<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>OAuth Redirect</title>
  <script src="https://accounts.google.com/gsi/client" async defer></script>
</head>
<body>
  <h1>Redirectingâ€¦</h1>
  <p>Please wait while we log you in with Google.</p>

  <script>
    // Parse query params from Google's redirect
    function getQueryParams() {
      const params = {};
      window.location.search
        .substring(1)
        .split("&")
        .forEach((pair) => {
          const [key, value] = pair.split("=");
          if (key) params[decodeURIComponent(key)] = decodeURIComponent(value || "");
        });
      return params;
    }

    (function handleRedirect() {
      const params = getQueryParams();

      if (params.code) {
        // This is the auth code from Google
        console.log("Google OAuth Code:", params.code);

        // Forward it back to your main app (hosted on WBS)
        // You can change this URL to match your WBS app endpoint
        window.location.href =
          "https://your-wbs-app-domain.com?code=" + encodeURIComponent(params.code);
      } else if (params.error) {
        console.error("Google OAuth Error:", params.error);
        document.body.innerHTML = "<h2>Login failed: " + params.error + "</h2>";
      } else {
        document.body.innerHTML = "<h2>No auth code received.</h2>";
      }
    })();
  </script>
</body>
</html>
